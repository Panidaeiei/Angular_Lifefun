<button class="back-button" [routerLink]="['/ProfileUser']" [queryParams]="{ id: userId }">
  <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="50px" fill="#5f6368">
    <path d="M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z" />
  </svg>
</button>

<div class="profile-wrapper">
  <h2 class="profile-title">แก้ไขโปรไฟล์</h2>
  <div class="loading-overlay" *ngIf="isLoading">
    <div class="spinner"></div>
  </div>
  <div class="profile-container"  [class.loading]="isLoading">
    <div class="profile-header">
      <button mat-flat-button style="background-color: #ff3d3d" (click)="onDeleteUser()">ลบบัญชี</button>
    </div>

    <div class="profile-form">
      <!-- รูปภาพโปรไฟล์ -->
      <div class="profile-image-wrapper">
        <div class="image-container">
          <img [src]="user.image_url || 'https://i.pinimg.com/736x/4c/85/31/4c8531dbc05c77cb7a5893297977ac89.jpg'"
            alt="Profile Image" />
          <!-- ปุ่มไอคอนแก้ไข -->
          <button class="edit-icon" (click)="triggerFileInput()">
            <i class="fa fa-edit"></i>
          </button>
          <!-- Input file สำหรับเลือกภาพ -->
          <input type="file" accept="image/*" hidden #fileInput (change)="onFileSelected($event)" />
        </div>
      </div>

      <!-- ฟอร์มข้อมูล -->
      <div class="form-group">
        <label>ชื่อผู้ใช้</label>
        <input type="text" [(ngModel)]="user.username" name="username" />
      </div>

      <div class="form-group">
        <label>อีเมล</label>
        <input type="email" [(ngModel)]="user.email" name="email" />
      </div>

      <div class="form-group">
        <label>เบอร์โทรศัพท์</label>
        <input type="tel" [(ngModel)]="user.phone" name="phone" />
      </div>

      <div class="form-group">
        <label>คำอธิบายตัวเอง</label>
        <textarea [(ngModel)]="user.description" name="description"></textarea>
      </div>

      <div class="form-group">
        <label>รหัสผ่านปัจจุบัน</label>
        <input type="password" [(ngModel)]="currentPassword" name="currentPassword" />
      </div>

      <div class="form-group">
        <label>รหัสผ่านใหม่</label>
        <input type="password" [(ngModel)]="newPassword" name="newPassword" />
      </div>

      <div class="form-group">
        <label>ยืนยันรหัสผ่าน</label>
        <input type="password" [(ngModel)]="confirmPassword" name="confirmPassword" />
      </div>
    </div>

    <!-- ปุ่ม ยกเลิก และ บันทึกข้อมูล -->
    <div class="form-actions">
      <button type="button" class="cancel-button" (click)="onCancel()">ยกเลิก</button>
      <button type="submit" class="save-button" (click)="onSaveProfile()">บันทึกข้อมูล</button>
    </div>
  </div>
</div>