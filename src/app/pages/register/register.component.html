<link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">

<div class="register-container">
  <!-- Header -->
  <div class="register-header">
    <h1 class="register-title">สมัครสมาชิก</h1>
  </div>

  <!-- Main Content -->
  <div class="register-content">
    <!-- Left Side - Brand Section -->
    <div class="brand-section">
      <div class="brand-content">
        <h2 class="welcome-text" *ngIf="!isMobile">ยินดีต้อนรับเข้าสู่ระบบ</h2>
        
        <div class="logo-container">
          <a href="">
            <img src="../../../assets/images/Logoweb.png" alt="Logo" class="brand-logo">
          </a>
        </div>
        
        <div class="brand-description" *ngIf="!isMobile">
          <p class="description-text">เว็บไซต์ที่ทำให้คุณเพลิดเพลิน กับการแลกเปลี่ยนทริคความรู้</p>
          <p class="description-text">แชร์ประสบการณ์กับผู้คนมากมาย</p>
        </div>
      </div>
    </div>

    <!-- Right Side - Form Section -->
    <div class="form-section">
      <button type="button" class="back-btn" (click)="goBack()" [disabled]="isLoading" aria-label="กลับ">
        <i class="fa fa-arrow-left"></i>
      </button>
      <div class="form-container">
        <!-- Profile Image Upload -->
        <div class="profile-upload">
          <label for="file-upload" class="profile-upload-label" [class.disabled]="isLoading">
            <img [src]="previewImage" alt="Profile Picture" class="profile-image" />
            <div class="upload-overlay">
              <i class="fa fa-camera"></i>
            </div>
          </label>
          <input type="file" id="file-upload" accept="image/*" (change)="onFileSelected($event)" [disabled]="isLoading" hidden />
        </div>

        <!-- Registration Form -->
        <form (ngSubmit)="register()" class="register-form" [class.loading]="isLoading">
          <!-- Email Field -->
          <div class="form-group">
            <label class="form-label">อีเมล (E-mail)</label>
            <div class="input-wrapper">
              <input type="email" 
                     placeholder="กรอกอีเมล เช่น example@domain.com" 
                     [(ngModel)]="userData.email" 
                     name="email" 
                     pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"
                     title="กรุณากรอกอีเมลในรูปแบบที่ถูกต้อง เช่น example@domain.com"
                     required 
                     [disabled]="isLoading"
                     class="form-input" />
            </div>
          </div>

          <!-- Username Field -->
          <div class="form-group">
            <label class="form-label">ชื่อผู้ใช้ (Username)</label>
            <div class="input-wrapper">
              <input type="text" 
                     placeholder="กรอกชื่อผู้ใช้" 
                     [(ngModel)]="userData.username" 
                     name="username" 
                     required 
                     [disabled]="isLoading"
                     class="form-input" />
            </div>
          </div>

          <!-- Phone Field -->
          <div class="form-group">
            <label class="form-label">เบอร์โทรศัพท์</label>
            <div class="input-wrapper">
              <input type="text" 
                     placeholder="กรอกเบอร์โทรศัพท์" 
                     [(ngModel)]="userData.phone" 
                     name="phone" 
                     required 
                     [disabled]="isLoading"
                     class="form-input" />
            </div>
          </div>

          <!-- Password + Confirm Password Row -->
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">รหัสผ่าน (Password)</label>
              <div class="input-wrapper password-wrapper">
                <input type="text" 
                       placeholder="กรอกรหัสผ่าน" 
                       [(ngModel)]="userData.password" 
                       name="password" 
                       required 
                       [disabled]="isLoading"
                       class="form-input password-input"
                       [class.password-hidden]="!isPasswordVisible"
                       autocomplete="new-password"
                       data-form-type="other" />
                <button type="button" 
                        (click)="togglePasswordVisibility()" 
                        [disabled]="isLoading"
                        class="password-toggle">
                  <i [class]="isPasswordVisible ? 'fa fa-eye' : 'fa fa-eye-slash'"></i>
                </button>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">ยืนยันรหัสผ่าน</label>
              <div class="input-wrapper password-wrapper">
                <input type="text" 
                       placeholder="ยืนยันรหัสผ่าน" 
                       [(ngModel)]="confirmPassword" 
                       name="confirmPassword" 
                       required 
                       [disabled]="isLoading"
                       class="form-input password-input"
                       [class.password-hidden]="!isConfirmPasswordVisible"
                       autocomplete="new-password"
                       data-form-type="other" />
                <button type="button" 
                        (click)="toggleConfirmPasswordVisibility()" 
                        [disabled]="isLoading"
                        class="password-toggle">
                  <i [class]="isConfirmPasswordVisible ? 'fa fa-eye' : 'fa fa-eye-slash'" ></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Login Link -->
          <div class="login-link">
            <span class="login-text">มีบัญชีอยู่แล้วใช่หรือไม่?</span>
            <a href="/login" class="login-anchor">เข้าสู่ระบบ</a>
          </div>

          <!-- Submit Button -->
          <button class="register-btn" type="submit" [disabled]="isLoading">
            <span *ngIf="!isLoading">สมัครสมาชิก</span>
            <span *ngIf="isLoading" class="loading-content">
              <i class="fa fa-spinner fa-spin"></i>
              กำลังสมัครสมาชิก...
            </span>
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
